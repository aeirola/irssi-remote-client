Polymer("polymer-xhr",{makeReadyStateHandler:function(a,b){a.onreadystatechange=function(){4==a.readyState&&b&&b.call(null,a.response,a)}},setRequestHeaders:function(a,b){if(b)for(var c in b)a.setRequestHeader(c,b[c])},toQueryString:function(a){var b=[];for(var c in a){var d=a[c];c=encodeURIComponent(c),b.push(null==d?c:c+"="+encodeURIComponent(d))}return b.join("&")},request:function(a){var b=new XMLHttpRequest,c=a.url,d=a.method||"GET",e=!a.sync,f=this.toQueryString(a.params);return f&&"GET"==d&&(c+=(c.indexOf("?")>0?"&":"?")+f),b.open(d,c,e),a.responseType&&(b.responseType=a.responseType),this.makeReadyStateHandler(b,a.callback),this.setRequestHeaders(b,a.headers),b.send("POST"==d?a.body||f:null),e||b.onreadystatechange(b),b}}),function(){function a(a,c){var d=new CustomEvent("polymer-signal-"+a,{bubbles:!0,detail:c});b.forEach(function(a){a.dispatchEvent(d)})}Polymer("polymer-signals",{enteredView:function(){b.push(this)},removed:function(){var a=b.indexOf(this);a>=0&&b.splice(a,1)}});var b=[];document.addEventListener("polymer-signal",function(b){a(b.detail.name,b.detail.data)})}(),Polymer("polymer-localstorage",{name:"",value:null,useRaw:!1,autoSaveDisabled:!1,enteredView:function(){this.async("load")},valueChanged:function(){this.loaded&&!this.autoSaveDisabled&&this.save()},load:function(){var a=window.localStorage.getItem(this.name);if(null===a||this.useRaw)this.value=a;else try{this.value=JSON.parse(a)}catch(b){this.value=a}this.loaded=!0,this.asyncFire("polymer-localstorage-load")},save:function(){window.localStorage.setItem(this.name,this.useRaw?this.value:JSON.stringify(this.value))}}),Polymer("polymer-flex-layout",{vertical:!1,isContainer:!1,layoutContainer:null,enteredView:function(){this.installControllerStyles(),this.layoutContainer=this.isContainer?this:this.parentNode.host||this.parentNode,this.verticalChanged(),this.alignChanged(),this.justifyChanged()},leftView:function(){this.layoutContainer=null},layoutContainerChanged:function(a){a&&a.classList.remove("flexbox"),this.style.display=this.layoutContainer===this?"":"none",this.layoutContainer&&this.layoutContainer.classList.add("flexbox")},switchContainerClass:function(a,b,c){this.layoutContainer&&c&&this.layoutContainer.classList.switch(a+b,a+c)},verticalChanged:function(){this.layoutContainer&&this.layoutContainer.classList.toggle("column",this.vertical)},alignChanged:function(a){this.switchContainerClass("align-",a,this.align)},justifyChanged:function(a){this.switchContainerClass("justify-",a,this.justify)}}),Polymer("remote-client-element",{showSidebar:!0,sidebarTab:"windows",notConfiguredSignal:function(){this.showSidebar=!0,this.sidebarTab="settings"},toggleSidebar:function(){this.showSidebar=!this.showSidebar},setSidebarTab:function(a,a,b){this.sidebarTab=b.attributes["data-tab"].value}}),Polymer("json-rpc-element",{url:"",auto:!1,method:"",params:"",response:null,request_id:1,headers:null,ready:function(){this.xhr=document.createElement("polymer-xhr")},receive:function(a,b){this.isSuccess(b)?this.processResponse(b):this.error(b),this.complete(b)},isSuccess:function(a){var b=a.status||0;return!b||b>=200&&300>b},processResponse:function(a){var b=this.evalResponse(a);this.response=b,this.fire("polymer-response",{response:b,xhr:a})},error:function(a){var b=a.status+": "+a.responseText;this.fire("polymer-error",{response:b,xhr:a})},complete:function(a){this.fire("polymer-complete",{response:a.status,xhr:a})},evalResponse:function(a){var b=a.responseText;try{var c=JSON.parse(b);return c.result}catch(d){return b}},getId:function(){return this.request_id++},urlChanged:function(){this.autoGo()},paramsChanged:function(){this.autoGo()},autoChanged:function(){this.autoGo()},autoGo:function(){this.auto&&(this.goJob=this.job(this.goJob,this.go,0))},go:function(){var a=this.xhrArgs||{};a.headers=this.headers||{},a.headers&&"string"==typeof a.headers&&(a.headers=JSON.parse(a.headers)),a.headers["Content-Type"]="application/json-rpc",a.callback=this.receive.bind(this),a.url=this.url,a.method="POST";var b={jsonrpc:"2.0",method:this.method,id:this.getId()};return this.params&&(b.params=JSON.parse(this.params)),a.body=JSON.stringify(b),this.xhr.request(a)}}),Polymer("irssi-rpc-element",{url:"",refnum:!1,winRefnum:0,settingsTimeout:300,headers:{"Irssi-Authorization":""},windowRefnumChangedSignal:function(a,b){this.winRefnum=b},settingsChangedSignal:function(a,b){this.url=b.url+"/json-rpc",this.headers["Irssi-Authorization"]=b.password},go:function(){if(this.refnum){var a=this.params?JSON.parse(this.params):{};a.refnum=this.winRefnum,this.params=JSON.stringify(a)}return this.super()}}),Polymer("windows-element",{refnum:1,readySignal:function(){this.fire("polymer-signal",{name:"window-refnum-changed",data:1}),this.async(function(){this.$.windowsLoader.go(),this.$.windowLoader.go()})},windowClicked:function(a,a,b){this.refnum=parseInt(b.attributes["data-refnum"].value),this.fire("polymer-signal",{name:"window-refnum-changed",data:this.refnum}),this.async(function(){this.$.windowLoader.go()})},windowLoaded:function(a,b){this.fire("polymer-signal",{name:"window-changed",data:b.response})}}),Polymer("nicklist-element",{nicks:[],windowChangedSignal:function(a,b){this.nicks=b.nicks||[]}}),Polymer("settings-element",{url:"",password:"",pollLength:300,ready:function a(){var a=!1;this.addEventListener("polymer-localstorage-load",function(){a||(this.notify(),this.url?this.fire("polymer-signal",{name:"ready"}):this.fire("polymer-signal",{name:"not-configured"}),a=!0)})},notify:function(){var a={url:this.url,password:this.password};this.fire("polymer-signal",{name:"settings-changed",data:a})},save:function(a){a.preventDefault(),this.$.password.value&&(this.password=CryptoJS.SHA512(this.$.password.value).toString(CryptoJS.enc.Base64).replace(/=*/g,"")),this.$.urlStore.save(),this.$.passwordStore.save(),window.location.reload()}}),Polymer("lines-element",{rowLimit:100,lastTimestamp:0,pollRequest:null,windowChangedSignal:function(a,b){this._setLines(b.lines),this._poll()},newLineLoaded:function(a,b){200==b.xhr.status&&(this._addLines(b.response),this._poll())},_poll:function(){this.pollRequest&&this.pollRequest.abort(),this.async(function(){this.pollRequest=this.$.longPolling.go()})},_setLines:function(a){document.getElementById("lines").innerHTML="",this._addLines(a)},_addLines:function(a){if(a.length>0){var b=document.getElementById("lines"),c=a[a.length-1];this.lastTimestamp=c.timestamp;{a.map(function(a){var c=document.createElement("p");c.innerHTML=this._urlize(a.text),b.appendChild(c)},this)}}this.async(function(){this.scrollTop=this.scrollHeight})},_urlize:function(a){return urlize(a,{target:"_blank",trim_url_limit:100,django_compatible:!1})}}),Polymer("topic-element",{name:"",topic:"",windowChangedSignal:function(a,b){this.topic=b.topic||"",this.name=b.name||""}}),Polymer("input-element",{line:"",sendLine:function(a){a.preventDefault(),this.line=this.$.line.value,this.$.line.value="",this.async(function(){this.$.rpc.go()})}});