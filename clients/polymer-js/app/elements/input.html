<polymer-element name="input-element" extends="window-aware-element">
  <template>
    <style>
      :host {
        width: 100%;
        display: block;
      }

      input {
        font-family: monospace;
        width: 100%;
      }
    </style>

    <form on-submit="{{sendLine}}">
      <input id="line" name="line" type="text" autocomplete="off" autofocus spellcheck="true">
      <button>-></button>
    </form>

    <json-rpc-element id="rpc" url="{{url}}/json-rpc"
      method="sendMessage"
      params='{"refnum": {{refnum}}, "message": "{{line}}"}'
      response="{{lines}}"
      headers="{{headers}}"
      on-polymer-response="{{linesLoaded}}">
    </json-rpc-element>

  </template>
  <script>
    Polymer('input-element', {
      line: '',
      sendLine: function sendLine(e) {
        e.preventDefault();
        this.line = this.$.line.value;
        this.$.line.value = "";

        this.async(function() {
          this.$.rpc.go();
        });
      }
    });
  </script>
</polymer-element>